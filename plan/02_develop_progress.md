# AI小说写作工具 - 开发进度表 (按阶段)

**阶段 0: 项目启动与基础架构搭建 (预计：1-2 周)**

| 任务ID | 任务名称                     | 详细描述                                                                                                                               | 产出物/可交付成果                                                                 | 备注                                               |
| :----- | :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ | :----------------------------------------------- |
| 0.1    | 开发环境搭建                 | 配置所有开发者的macOS开发环境 (Node.js, Rust, Python, IDEs等)，统一版本控制 (Git)。                                                                | 统一的开发环境配置文档。                                                              | 确保所有M4 Mac环境一致。                          |
| 0.2    | 技术选型最终确认与Demo       | (React vs Vue) 快速原型验证，最终确定前端框架。Tauri基础项目创建。FastAPI基础项目创建。                                                               | 选定的前端框架。Tauri Hello World应用。FastAPI Hello World API。                 | 快速决策，避免后期摇摆。                             |
| 0.3    | 项目结构与代码规范           | 设定前端、后端、Tauri项目的目录结构。制定代码风格规范 (ESLint, Prettier, Black, Flake8)。                                                              | 项目骨架代码库。代码规范文档。                                                            | 一致性是长期维护的关键。                             |
| 0.4    | CI/CD初步设置 (可选)       | 搭建基础的持续集成/持续部署流程 (如GitHub Actions)，用于自动化测试和构建。                                                                         | 基础的CI/CD流水线。                                                              | 初期可选，但尽早引入有益。                           |
| 0.5    | 核心数据模型初稿             | 初步设计小说项目文件结构、用户配置等核心数据模型。                                                                                                | 数据模型设计文档初稿。                                                            | 为后续数据库和文件存储打基础。                       |

---

**阶段 1: MVP - 核心编辑与基础AI集成 (预计：6-8 周)**

| 任务ID | 任务名称                     | 详细描述                                                                                                                                                                | 产出物/可交付成果                                                                                                     | 备注                                                                 |
| :----- | :--------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------- |
| 1.1    | Tauri应用外壳与文件操作      | 实现基本的macOS窗口、菜单栏 (文件 -> 新建、打开、保存)。实现小说项目文件的创建、读取和保存逻辑 (初期可为简单JSON或特定bundle)。                                                                            | 可运行的Tauri应用，能进行基本文件操作。                                                                                 | 用户可以实际创建和保存“小说”。                                           |
| 1.2    | 富文本编辑器(Tiptap)集成    | 将Tiptap集成到前端框架中。实现基础格式化功能：加粗、斜体、下划线、标题、列表、引用。实现撤销/重做。                                                                                                   | 带有核心编辑功能的富文本编辑器界面。                                                                                    | 编辑器稳定性和流畅性是首要目标。                                       |
| 1.3    | AI接口模块 (后端)            | FastAPI后端：创建API端点用于接收前端请求。实现与至少一个LLM API (如OpenAI) 的连接、请求封装、API密钥管理 (初期可简单配置)。                                                                                 | 可通过API调用LLM的后端服务。                                                                                           | 为后续AI功能提供基础。                                                |
| 1.4    | **基础AI功能一：内容扩写**   | 前端：用户选中文字，通过按钮触发。后端：接收选中文本和上下文，构建Prompt调用LLM进行扩写。前端：展示AI生成结果，用户可选择插入或替换。                                                                               | 第一个可用的AI辅助功能：扩写。                                                                                         | 验证整个AI调用链路。                                                    |
| 1.5    | **基础AI功能二：内容改写**   | 类似扩写流程，但Prompt设计为内容润色或不同风格改写。提供多种改写选项。                                                                                                             | 第二个可用的AI辅助功能：改写。                                                                                         |
| 1.6    | （可选）Markdown快捷输入    | 在Tiptap中支持部分Markdown语法的快捷输入和实时转换。                                                                                                                         | 提升编辑效率的Markdown支持。                                                                                         |
| 1.7    | 基本UI/UX设计与实现         | 设计并实现应用的主题、布局、基本交互元素。                                                                                                                                     | 初步的、一致的应用视觉风格和用户体验。                                                                                  | 保持简洁易用。                                                         |
| 1.8    | **阶段性测试与反馈收集**     | 对MVP功能进行内部测试，收集初步反馈。                                                                                                                                      | 测试报告，反馈记录。                                                                                                |

---

**阶段 2: 知识获取与初步RAG (预计：6-8 周)**

| 任务ID | 任务名称                     | 详细描述                                                                                                                                                             | 产出物/可交付成果                                                                                                      | 备注                                                               |
| :----- | :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------- |
| 2.1    | 网络搜索功能 (后端+前端)     | 后端：集成搜索引擎API (如Google Search API) 或开发简单爬虫模块。前端：提供搜索输入框和结果展示区域。                                                                                                 | 可在应用内进行网络搜索并查看结果。                                                                                         | 优先API，爬虫按需。                                                    |
| 2.2    | 用户知识库：数据存储与管理   | 后端：选择并部署向量数据库 (ChromaDB)。实现文本分块、向量化 (Sentence Transformers) 并存入向量数据库的逻辑。前端：提供上传文档 (txt, md) 和管理已导入知识的界面。                                                          | 用户可以将外部文档导入个人知识库。后端具备向量存储和检索能力。                                                                     | 这是RAG的基础。                                                      |
| 2.3    | **RAG功能一：基于知识库问答** | 前端：用户提出关于已导入知识库内容的问题。后端：将问题向量化，在向量数据库中检索相关文本片段，结合问题和检索到的上下文构建Prompt，调用LLM生成答案。前端：展示答案。                                                                  | AI可以回答基于用户上传文档的问题。                                                                                          | 验证RAG流程。                                                         |
| 2.4    | **AI功能扩展：大纲撰写**     | 前端：用户输入小说主题/核心概念。后端：构建Prompt调用LLM生成大纲。可结合用户知识库内容作为参考 (初步RAG应用)。                                                                                             | AI辅助生成小说大纲。                                                                                                  |
| 2.5    | **AI功能扩展：灵感激发**     | 前端：用户输入关键词/场景。后端：构建Prompt调用LLM生成灵感。可结合用户知识库内容作为参考。                                                                                                          | AI辅助提供写作灵感。                                                                                                  |
| 2.6    | 关系型数据库集成 (PostgreSQL) | 后端：集成PostgreSQL，用于存储用户信息 (若有)、项目元数据、应用配置等。                                                                                                               | 结构化数据存储方案。                                                                                                 | 为后续更复杂功能做准备。                                                 |
| 2.7    | **阶段性测试与反馈收集**     | 对知识获取和RAG功能进行测试。                                                                                                                                               | 测试报告，反馈记录。                                                                                                 |

---

**阶段 3: 小说内部知识图谱构建 (预计：8-10 周)**

| 任务ID | 任务名称                        | 详细描述                                                                                                                                                               | 产出物/可交付成果                                                                                                              | 备注                                                                  |
| :----- | :------------------------------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------ |
| 3.1    | 图数据库集成 (Neo4j)          | 后端：选择并部署图数据库 (Neo4j)。学习Cypher查询语言。                                                                                                                           | Neo4j环境就绪。                                                                                                              |
| 3.2    | 知识图谱Schema设计            | 定义小说核心实体类型 (人物、地点、事件、物品等) 及其属性和关系类型。                                                                                                                  | 知识图谱Schema文档。                                                                                                         | 这是图谱的蓝图。                                                        |
| 3.3    | 实体与关系手动录入界面 (前端)   | 前端：设计并实现用于手动创建、编辑、删除知识图谱中实体和关系的界面。例如，角色卡片，关系编辑器。                                                                                                     | 用户可以手动构建小说知识图谱的界面。                                                                                           | 初期依赖手动录入。                                                      |
| 3.4    | 知识图谱数据存储与查询 (后端)   | 后端：FastAPI提供API接口，用于将前端录入的实体和关系数据存储到Neo4j。实现基本的图谱查询功能。                                                                                                    | 后端支持知识图谱数据的增删改查。                                                                                               |
| 3.5    | (进阶) 文本中实体半自动识别   | 后端：研究并集成NLP工具 (如spaCy, Hugging Face NER模型) 从选定的小说文本中初步识别预定义的实体类型，供用户确认和添加到知识图谱。                                                                                   | 初步的实体识别功能，可辅助用户构建图谱。                                                                                         | 提高构建效率，但准确性需用户把关。                                        |
| 3.6    | 知识图谱可视化 (初级)         | 前端：研究并集成简单的图可视化库 (如Vis.js, Cytoscape.js) 或利用Neo4j自带工具，展示小说知识图谱的基本结构。                                                                                             | 可视化展示小说角色关系等。                                                                                                   | 帮助用户理解小说结构。                                                    |
| 3.7    | **阶段性测试与反馈收集**        | 对知识图谱构建和可视化功能进行测试。                                                                                                                                         | 测试报告，反馈记录。                                                                                                         |

---

**阶段 4: Graph RAG 与高级AI功能 (预计：8-10 周)**

| 任务ID | 任务名称                        | 详细描述                                                                                                                                                              | 产出物/可交付成果                                                                                                                | 备注                                                                     |
| :----- | :------------------------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------- |
| 4.1    | **Graph RAG 实现**              | 后端：当AI需要特定小说内部设定信息时 (如“A和B的关系”)，将此需求转换为对Neo4j的查询。将查询结果整合到LLM的Prompt中，增强上下文。与向量RAG协同工作。                                                                                  | AI在生成内容时能更准确地利用小说知识图谱信息。                                                                                   | 核心是提升内容一致性。                                                      |
| 4.2    | **AI功能升级：风格控制**        | 前端：提供更细致的风格选择或描述。后端：利用Graph RAG (如角色性格特点) 和用户知识库中的风格范例，优化Prompt，使AI生成内容更贴合指定风格。                                                                                   | 更精准的写作风格控制。                                                                                                     |
| 4.3    | **AI功能升级：一致性检查 (辅助)** | 后端：AI生成新内容后，可基于知识图谱和前文进行初步的一致性分析 (如新情节是否与角色已有设定冲突)。前端：高亮潜在不一致处，供用户参考。                                                                                      | AI辅助识别潜在的内容不一致问题。                                                                                             | 非完全自动修正，以提示为主。                                                 |
| 4.4    | 统一知识检索接口                | 后端：构建统一的检索服务层，AI模块通过此接口透明地访问网络搜索、向量知识库、图知识库。可能需要设计信息源优先级或融合策略。                                                                                            | 简化的AI调用知识源的逻辑。                                                                                                 |
| 4.5    | 富文本编辑器高级功能            | 根据需求，在Tiptap中添加更高级的功能，如表格、特殊符号插入、评论/批注等。                                                                                                             | 更完善的编辑体验。                                                                                                       |
| 4.6    | **阶段性测试与反馈收集**        | 对Graph RAG和高级AI功能进行深度测试。                                                                                                                                     | 测试报告，反馈记录。                                                                                                         |

---

**阶段 5: 自主AI Agent 初步实现 (预计：10-12 周，此阶段高度探索性)**

| 任务ID | 任务名称                     | 详细描述                                                                                                                                                               | 产出物/可交付成果                                                                                                         | 备注                                                                        |
| :----- | :--------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------ |
| 5.1    | AI Agent框架选型/设计        | 后端：研究并选择/设计AI Agent的架构 (如基于LangChain Agents, LlamaIndex Agents或自研)。定义Agent的思考-行动循环。                                                                                        | 确定的Agent技术方案。                                                                                                   | 这是项目的核心挑战之一。                                                       |
| 5.2    | Agent工具集定义与实现        | 后端：将前面开发的AI功能 (扩写、改写、大纲、灵感)、知识检索功能 (网络、向量RAG、Graph RAG) 封装成Agent可以调用的“工具”。                                                                                   | Agent可调用的工具API集合。                                                                                                |
| 5.3    | Agent决策逻辑与Prompt设计    | 后端：设计核心的Meta-Prompt和决策逻辑，使Agent能够基于当前写作目标、上下文和可用工具，自主规划下一步行动 (调用哪个工具，输入什么参数)。                                                                               | 初步的Agent自主决策能力。                                                                                                 | 需要大量实验和调优。                                                          |
| 5.4    | **自主写作场景一：续写章节**   | 前端：用户提供章节开头或指定续写任务。后端Agent：分析上下文，利用工具集进行信息检索和内容生成，完成章节续写。                                                                                                   | Agent可以根据指令自主续写小说章节。                                                                                           |
| 5.5    | 用户干预与Agent状态展示      | 前端：提供界面展示Agent的当前思考步骤、正在使用的工具。允许用户在关键节点暂停Agent、提供反馈或修正方向。                                                                                                   | 用户可以监控并有限度地引导Agent。                                                                                           | 增加Agent的可用性。                                                          |
| 5.6    | **阶段性测试与高度迭代**     | 对AI Agent的自主写作能力进行严格测试，根据结果快速迭代Agent的决策逻辑和Prompt。                                                                                                                | 测试报告，反馈记录，Agent性能评估。                                                                                         | 此阶段可能需要多次大的调整。                                                    |

---

**阶段 6: 优化、完善与Beta测试 (预计：4-6 周 + 持续)**

| 任务ID | 任务名称                 | 详细描述                                                                                                                               | 产出物/可交付成果                                                                 | 备注                                  |
| :----- | :----------------------- | :------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ | :---------------------------------- |
| 6.1    | 性能优化                 | 对前端渲染、后端API响应、数据库查询、AI模型调用等进行性能分析和优化。特别关注M4芯片的优化。                                                                       | 性能分析报告，优化后的应用。                                                          | 提升用户体验。                          |
| 6.2    | UI/UX打磨               | 根据前期反馈，全面审视并优化应用的UI设计和交互流程，提升易用性和美观度。                                                                                             | 改进的UI/UX。                                                                   |
| 6.3    | 错误处理与稳定性增强     | 完善应用的错误处理机制，增加日志记录，修复已知Bug，提升应用稳定性。                                                                                               | 更稳定可靠的应用。                                                                |
| 6.4    | 教程与帮助文档           | 编写用户手册、功能教程、FAQ等，帮助用户快速上手。                                                                                                   | 完整的用户文档。                                                                  |
| 6.5    | Beta版本发布与用户反馈  | 发布Beta版本给小范围目标用户进行测试，收集真实场景下的使用反馈。                                                                                               | Beta测试报告，用户反馈汇总。                                                        | 为正式发布做准备。                      |
| 6.6    | 根据Beta反馈进行迭代改进 | 针对Beta测试中发现的问题和有价值的建议，进行快速迭代和功能完善。                                                                                                  | 持续改进的应用版本。                                                              |

---

**重要说明：**

*   **时间估算：** 以上时间均为粗略估算，实际开发中会因具体技术细节、遇到的挑战和团队效率而有所不同。
*   **测试：** 每个功能开发完成后都应伴随单元测试、集成测试和用户验收测试。
*   **文档：** 保持开发文档（API文档、架构文档、设计文档）的同步更新。
*   **灵活性：** 保持计划的灵活性，根据项目进展和外部变化（如新的AI技术出现）适时调整。
